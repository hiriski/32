"use strict";(self.webpackChunkquiz=self.webpackChunkquiz||[]).push([[263],{66:function(n,e,t){var i,o,r=t(168),l=t(1413),a=t(2791),s=t(2975),d=t(61),c=t(184),u=d.ZP.div(i||(i=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    border-radius: 0.4rem;\n    padding: 0.2rem 0.6rem;\n    cursor: pointer;\n    position: relative;\n    border-color: transparent;\n    svg {\n        font-size: 22px;\n        color: #ffffff;\n        margin-left: 0.3rem;\n    }\n"]))),m=d.ZP.p(o||(o=(0,r.Z)(["\n    color: #fff;\n    margin-bottom: 0;\n    font-weight: bold;\n    font-size: 0.9rem;\n"])));e.Z=function(n){var e=n.type,t=n.isSelected,i=n.onClick,o=(0,a.useCallback)((function(){"function"===typeof i&&i(e)}),[i,e]),r=((0,a.useCallback)((function(){}),[]),(0,a.useMemo)((function(){return"function"===typeof i}),[i])),d=(0,a.useMemo)((function(){var n;return(null===(n=s.T.find((function(n){return n.value===e})))||void 0===n?void 0:n.name)||s.T[0].name}),[e]);return(0,c.jsxs)(u,{onClick:o,style:(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},"heart_refill"===e&&{backgroundColor:"#ff0b38"}),"friends_follow"===e&&{backgroundColor:"#eb12ff"}),"common"===e&&{backgroundColor:"#58cc02"}),"streak"===e&&{backgroundColor:"#ff6200"}),"reminder"===e&&{backgroundColor:"#ff1717"}),"leaderboard"===e&&{backgroundColor:"#3492fc"}),"heart_refill"===e&&t&&{borderColor:"#d40027"}),"friends_follow"===e&&t&&{borderColor:"#cb00dd"}),"common"===e&&t&&{borderColor:"#0b1404"}),"streak"===e&&t&&{borderColor:"#c34b00"}),"reminder"===e&&t&&{borderColor:"#cb0000"}),"leaderboard"===e&&t&&{borderColor:"#0063d4"}),r&&!t&&{opacity:.4}),children:[(0,c.jsx)(m,{children:d}),t&&(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{fill:"currentColor",d:"m9.55 18l-5.7-5.7l1.425-1.425L9.55 15.15l9.175-9.175L20.15 7.4z"})})]})}},9198:function(n,e,t){var i,o,r,l,a,s,d=t(168),c=t(2791),u=t(61),m=t(9346),f=t(184),p=u.ZP.div(i||(i=(0,d.Z)(["\n    display: flex;\n    align-items: center;\n    height: 72px;\n    width: 100%;\n    border: 1px solid rgb(109 109 109 / 10%);\n    border-radius: 0.4rem;\n    margin-bottom: 0.5rem;\n    padding: 0.2rem 0.6rem;\n    cursor: pointer;\n"]))),h=u.ZP.div(o||(o=(0,d.Z)(["\n    margin-left: 0.8rem;\n"]))),x=u.ZP.h4(r||(r=(0,d.Z)(["\n    font-size: 1rem;\n    font-weight: 700;\n    margin-bottom: 0.25rem;\n    margin-right: 1rem;\n"]))),v=u.ZP.p(l||(l=(0,d.Z)(["\n    font-size: 0.8rem;\n    margin-bottom: 0;\n"]))),g=u.ZP.img(a||(a=(0,d.Z)(["\n    width: 45px;\n    height: 45px;\n    border-radius: 45px;\n"]))),b=u.ZP.button(s||(s=(0,d.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: auto;\n    height: 26px;\n    width: 26px;\n    background-color: transparent;\n    border: 1px solid #ececec;\n    border-radius: 26px;\n    padding: 0;\n    svg {\n        font-size: 26px;\n        color: #00d323;\n    }\n"])));e.Z=function(n){var e=n.data,t=n.checked,i=n.onCheck,o=n.canChecked,r=(0,c.useCallback)((function(){o&&i(e)}),[e,i,o]);return(0,f.jsxs)(p,{onClick:r,children:[(0,f.jsx)(g,{src:(null===e||void 0===e?void 0:e.imgPath)||m}),(0,f.jsxs)(h,{children:[(0,f.jsx)(x,{children:e.displayName}),(0,f.jsx)(v,{children:e.email})]}),o&&(0,f.jsx)(b,{onClick:r,children:t?(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m-.997-6l7.07-7.071l-1.413-1.414l-5.657 5.657l-2.829-2.829l-1.414 1.414z"})}):(0,f.jsx)("div",{})})]})}},2975:function(n,e,t){t.d(e,{T:function(){return i}});var i=[{name:"General",value:"common"},{name:"Reminder",value:"reminder"},{name:"Friends Follow",value:"friends_follow"},{name:"Leaderboard",value:"leaderboard"},{name:"Refill Heart",value:"heart_refill"},{name:"Streak",value:"streak"}]},7263:function(n,e,t){t.r(e),t.d(e,{default:function(){return ee}});var i,o,r,l,a,s,d,c,u,m,f,p,h,x,v,g,b,Z,j,w,y,k,C,N,P,_,S,z,B,T,U,M,I=t(168),F=t(4165),L=t(5861),A=t(9439),R=t(2791),O=t(7689),q=t(7022),E=t(9743),V=t(2677),G=t(4270),W=t(9582),D=t(8815),Q=t(2351),H=(t(7261),t(5305)),X=t(4420),J=t(7709),K=t(1830),Y=t.n(K),$=t(61),nn=t(66),en=t(5218),tn=t(6678),on=t(184),rn=$.ZP.div(i||(i=(0,I.Z)(["\n    width: 100%;\n    border: 1px solid rgb(109 109 109 / 10%);\n    border-radius: 0.4rem;\n    margin-bottom: 0.5rem;\n    padding: 0.5rem 0.6rem;\n    position: relative;\n    cursor: pointer;\n    overflow: hidden;\n"]))),ln=$.ZP.div(o||(o=(0,I.Z)(["\n    display: flex;\n    align-items: center;\n    position: relative;\n"]))),an=$.ZP.div(r||(r=(0,I.Z)(["\n    position: absolute;\n    top: 10px;\n    right: 10px;\n"]))),sn=$.ZP.div(l||(l=(0,I.Z)(["\n    margin-left: 0.8rem;\n"]))),dn=$.ZP.h4(a||(a=(0,I.Z)(["\n    font-size: 1rem;\n    font-weight: 700;\n    margin-bottom: 0.25rem;\n    margin-right: 1rem;\n"]))),cn=$.ZP.p(s||(s=(0,I.Z)(["\n    font-size: 0.8rem;\n    margin-bottom: 0;\n"]))),un=$.ZP.div(d||(d=(0,I.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.2s;\n    position: absolute;\n    bottom: 10px;\n    right: 7px;\n"]))),mn=$.ZP.button(c||(c=(0,I.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: auto;\n    height: 32px;\n    width: 32px;\n    background-color: transparent;\n    border: 1px solid #315eff;\n    border-radius: 6px;\n    padding: 0;\n    svg {\n        font-size: 18px;\n        color: #315eff;\n    }\n    &:hover {\n        background-color: #315eff;\n        svg {\n            color: #fff;\n        }\n    }\n"]))),fn=$.ZP.button(u||(u=(0,I.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: auto;\n    height: 32px;\n    width: 32px;\n    background-color: transparent;\n    border: 1px solid #ff2c2c;\n    border-radius: 6px;\n    padding: 0;\n    margin-left: 0.5rem;\n    svg {\n        font-size: 20px;\n        color: #ff0000;\n    }\n    &:hover {\n        background-color: #ff0000;\n        svg {\n            color: #fff;\n        }\n    }\n"]))),pn=$.ZP.button(m||(m=(0,I.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: auto;\n    height: 32px;\n    width: 32px;\n    background-color: transparent;\n    border: 1px solid #00e15a;\n    border-radius: 6px;\n    padding: 0;\n    margin-left: 0.5rem;\n    svg {\n        font-size: 20px;\n        color: #00e15a;\n    }\n    &:hover {\n        background-color: #00e15a;\n        svg {\n            color: #fff;\n        }\n    }\n"]))),hn=$.ZP.div(f||(f=(0,I.Z)(["\n    width: 100px;\n"]))),xn=$.ZP.div(p||(p=(0,I.Z)(["\n    position: relative;\n    padding-top: 80px;\n    width: 80px;\n"]))),vn=$.ZP.div(h||(h=(0,I.Z)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    overflow: hidden;\n    border-radius: 0.2rem;\n    width: 100%;\n    & img {\n        object-fit: cover;\n        width: 100%;\n        height: 100%;\n    }\n"]))),gn=function(n){var e=n.data,t=n.fetchData,i=n.onEdit,o=(0,X.I0)(),r=(0,Q.zn)(),l=r.notifications_setModalSendTemplate,a=r.modalSendTemplate,s=(0,R.useCallback)((function(){}),[]),d=(0,R.useCallback)((0,L.Z)((0,F.Z)().mark((function n(){return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,J.ho.admin_deleteNotificationTemplate(e._id);case 3:n.sent&&"function"===typeof t&&(t(),en.ZP.success("Notification template has been deleted.")),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])}))),[e._id,t]),c=(0,R.useCallback)((0,L.Z)((0,F.Z)().mark((function n(){return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"function"===typeof i&&i(e);case 1:case"end":return n.stop()}}),n)}))),[e,i]),u=(0,R.useCallback)((function(){o(l({open:!0,template:e}))}),[e,a,l]),m=(0,R.useMemo)((function(){return"function"!=typeof t&&"function"!==typeof i}),[t,i]);return(0,on.jsxs)(rn,{onClick:s,children:[(0,on.jsx)(hn,{children:e.type&&(0,on.jsx)(an,{children:(0,on.jsx)(nn.Z,{type:e.type})})}),(0,on.jsxs)(ln,{children:[(0,on.jsx)(xn,{children:(0,on.jsx)(vn,{children:(0,on.jsx)("img",{src:(null===e||void 0===e?void 0:e.imageUrl)||tn.Z.NoImg,alt:"placeholder"})})}),(0,on.jsxs)(sn,{children:[(0,on.jsx)(dn,{children:e.title}),(0,on.jsx)(cn,{children:e.body})]}),!m&&(0,on.jsxs)(un,{className:"ButtonContainer",children:[(0,on.jsx)(mn,{onClick:c,className:"edit-btn",children:(0,on.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",children:(0,on.jsx)("path",{fill:"currentColor",d:"M10.529 1.764a2.621 2.621 0 1 1 3.707 3.707l-.779.779L9.75 2.543zM9.043 3.25L2.657 9.636a2.96 2.96 0 0 0-.772 1.354l-.87 3.386a.5.5 0 0 0 .61.608l3.385-.869a2.95 2.95 0 0 0 1.354-.772l6.386-6.386z"})})}),(0,on.jsx)(pn,{onClick:u,className:"delete-btn",children:(0,on.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14L21 3m0 0l-6.5 18a.55.55 0 0 1-1 0L10 14l-7-3.5a.55.55 0 0 1 0-1z"})})}),(0,on.jsx)(fn,{onClick:d,className:"delete-btn",children:(0,on.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,on.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14 11v6m-4-6v6M6 7v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7M4 7h16M7 7l2-4h6l2 4"})})})]})]})]})},bn=t(1241),Zn=t(1413),jn=t(5630),wn=t(1134),yn=t(4695),kn=t(8007),Cn=t(9681),Nn=(t(8520),t(7992),t(8414)),Pn=t(2975),_n=kn.Ry().shape({title:kn.Z_().required("Field required").max(120),body:kn.Z_().required("Field required").max(200),type:kn.Z_().required("Field required"),imageUrl:kn.Z_().nullable()}),Sn={_id:null,title:"",body:"",imageUrl:"",type:""},zn=$.ZP.div(x||(x=(0,I.Z)(["\n    display: flex;\n    align-self: center;\n    justify-content: center;\n    margin-top: 1rem;\n"]))),Bn=$.ZP.div(v||(v=(0,I.Z)(["\n    border: 1px solid #00aeff;\n    background-color: #c6deff;\n    padding: 0.5rem;\n    border-radius: 0.4rem;\n    margin-bottom: 1rem;\n"]))),Tn=$.ZP.div(g||(g=(0,I.Z)(["\n    margin-bottom: 1rem;\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0.6rem 0.9rem;\n"]))),Un=$.ZP.div(b||(b=(0,I.Z)(["\n    margin-bottom: 0.5rem;\n    margin-right: 0.5rem;\n"]))),Mn=$.ZP.div(Z||(Z=(0,I.Z)(["\n    position: relative;\n    width: 240px;\n    max-height: 240px;\n    overflow: hidden;\n    margin: auto;\n    label {\n        display: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        flex-direction: column;\n        background: rgb(255 255 255 / 0%);\n        align-items: center;\n        justify-content: center;\n        font-size: 15px;\n        color: #fff;\n        font-weight: 700;\n    }\n    &:hover label {\n        display: flex;\n    }\n    label svg {\n        width: 32px;\n        height: auto;\n    }\n    input {\n        display: none;\n    }\n"]))),In=$.ZP.div(j||(j=(0,I.Z)(["\n    border-radius: 12px;\n    overflow: hidden;\n    line-height: 0;\n    border: 2px solid rgb(109 109 109 / 10%);\n    img {\n        width: 100%;\n        height: auto;\n    }\n"]))),Fn=$.ZP.div(w||(w=(0,I.Z)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(103 103 103 / 30%);\n    border-radius: 12px;\n"]))),Ln=$.ZP.div(y||(y=(0,I.Z)(["\n    display: flex;\n    flex-direction: column;\n    background: #0063ff;\n    align-items: center;\n    justify-content: center;\n    border-radius: 10px;\n    padding: 10px 16px;\n    cursor: pointer;\n"]))),An=$.ZP.div(k||(k=(0,I.Z)(["\n    font-size: 14px;\n    font-weight: bold;\n    text-align: center;\n    margin-top: 0.5rem;\n"]))),Rn=$.ZP.div(C||(C=(0,I.Z)(["\n    font-size: 13px;\n    font-weight: bold;\n    color: #dc3545;\n    text-align: center;\n    margin-top: -10px;\n    margin-bottom: 1rem;\n"]))),On=function(n){var e,t,i,o,r=n.onSubmit,l=n.defaultValue,a=((0,X.I0)(),(0,Q.w5)().reward_setModalForm,(0,R.useState)(!1)),s=(0,A.Z)(a,2),d=s[0],c=s[1],u=(0,R.useState)(null),m=(0,A.Z)(u,2),f=m[0],p=m[1],h=(0,R.useState)(null),x=(0,A.Z)(h,2),v=x[0],g=x[1],b=(0,Q.zn)().selectedUserRecipients,Z=(0,R.useMemo)((function(){return Boolean(null===l||void 0===l?void 0:l._id)}),[l]),j=(0,wn.cI)({defaultValues:Sn,resolver:(0,yn.X)(_n)}),w=j.control,y=j.reset,k=j.handleSubmit,C=j.setValue,N=j.watch,P=j.getValues,_=j.formState.errors,S=function(){var n=(0,L.Z)((0,F.Z)().mark((function n(e){var t;return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=null===e||void 0===e?void 0:e._id,r((0,Zn.Z)({},e),t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();(0,R.useEffect)((function(){null!==l&&void 0!==l&&l.title?(C("_id",(null===l||void 0===l?void 0:l._id)||null),C("title",(null===l||void 0===l?void 0:l.title)||""),C("body",(null===l||void 0===l?void 0:l.body)||""),C("imageUrl",(null===l||void 0===l?void 0:l.imageUrl)||""),C("type",(null===l||void 0===l?void 0:l.type)||Pn.T[0].value),l.imageUrl&&p(l.imageUrl)):(y(Sn),p(null),g(null))}),[l]),(0,R.useEffect)((function(){(null===b||void 0===b?void 0:b.length)>0||(y(Sn),p(null),g(null))}),[b]);var z=function(n){n===P("type")?C("type",null):C("type",n)},B=(0,R.useCallback)(function(){var n=(0,L.Z)((0,F.Z)().mark((function n(e){var t;return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.prev=1,n.next=4,J.ho.admin_uploadImage(e);case 4:null!==(t=n.sent)&&void 0!==t&&t.data&&(p(t.data),C("imageUrl",t.data)),c(!1),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),p(null),console.log("e",n.t0),c(!1);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),[f,v]);return(0,on.jsx)(jn.Z,{onSubmit:k(S,(function(n){console.log("_errors",n)})),className:"px-2 FingoShapeRadius",children:(0,on.jsxs)(E.Z,{className:"justify-content-center",children:[(0,on.jsxs)(V.Z,{xs:9,className:"px-2 mb-3",children:[(0,on.jsxs)(Mn,{children:[(0,on.jsx)("label",{htmlFor:"uploadImage",children:(0,on.jsxs)(Ln,{children:[(0,on.jsx)(Cn.r,{}),(0,on.jsx)("p",{className:"mb-0",children:"Browse to upload"})]})}),(0,on.jsx)("input",{id:"uploadImage",type:"file",onChange:function(n){var e;if(null!==(e=n.target.files)&&void 0!==e&&e[0]){var t=n.target.files[0],i=new FormData;i.append("image",t),B(i)}},accept:".png,.jpg,.jpeg"}),(0,on.jsxs)(In,{children:[!f&&!v&&(0,on.jsx)("img",{src:tn.Z.NoImg,alt:"placeholder"}),f?(0,on.jsx)("img",{src:f,alt:"img"}):(0,on.jsx)(on.Fragment,{children:v&&(0,on.jsx)("img",{src:v,alt:"img"})}),d&&(0,on.jsx)(Fn,{children:(0,on.jsx)(Nn.Z,{height:220})})]})]}),(0,on.jsx)(An,{children:(0,on.jsx)("p",{children:"Recommended square image 1:1"})}),(0,on.jsx)("div",{children:f&&(0,on.jsx)("div",{className:"mt-2 mb-3 text-center",children:(0,on.jsx)(bn.mW,{onClick:function(){p(null),C("imageUrl",null)},size:"sm",color:"danger",children:"Remove Image"})})})]}),(0,on.jsxs)(V.Z,{xs:12,children:[(0,on.jsx)(Tn,{className:"FingoShapeRadius FingoBorders",style:{borderColor:null!==_&&void 0!==_&&null!==(e=_.type)&&void 0!==e&&e.message?"red":"transparent"},children:Pn.T.map((function(n){return(0,on.jsx)(Un,{children:(0,on.jsx)(nn.Z,{onClick:z,type:n.value,isSelected:N("type")===n.value})},n.value)}))}),(null===_||void 0===_||null===(t=_.type)||void 0===t?void 0:t.message)&&(0,on.jsx)(Rn,{children:null!==(i=null===_||void 0===_||null===(o=_.type)||void 0===o?void 0:o.message)&&void 0!==i?i:""})]}),(0,on.jsx)(V.Z,{xs:12,className:"px-2",children:(0,on.jsx)(Bn,{children:(0,on.jsxs)("p",{style:{marginBottom:0,color:"#000"},children:["Use this template string to mention user"," ",(0,on.jsx)("strong",{children:"[[NAME]], [[EMAIL]]"})]})})}),(0,on.jsx)(V.Z,{xs:12,className:"px-2",children:(0,on.jsx)(wn.Qr,{name:"title",control:w,render:function(n){var e,t,i,o,r=n.field;return(0,on.jsxs)(jn.Z.Group,{className:"mb-3",controlId:"formGroupName",children:[(0,on.jsx)(jn.Z.Label,{children:"Notification Title"}),(0,on.jsx)(bn.O1,(0,Zn.Z)((0,Zn.Z)({},r),{},{as:"textarea",rows:2,placeholder:"Input title",isInvalid:Boolean(null===_||void 0===_||null===(e=_.title)||void 0===e?void 0:e.message)})),(null===_||void 0===_||null===(t=_.title)||void 0===t?void 0:t.message)&&(0,on.jsx)(jn.Z.Control.Feedback,{type:"invalid",children:null!==(i=null===_||void 0===_||null===(o=_.title)||void 0===o?void 0:o.message)&&void 0!==i?i:""})]})}})}),(0,on.jsx)(V.Z,{xs:12,className:"px-2",children:(0,on.jsx)(wn.Qr,{name:"body",control:w,render:function(n){var e,t,i,o,r=n.field;return(0,on.jsxs)(jn.Z.Group,{className:"mb-3",controlId:"formGroupName",children:[(0,on.jsx)(jn.Z.Label,{children:"Notification Body"}),(0,on.jsx)(bn.O1,(0,Zn.Z)((0,Zn.Z)({},r),{},{as:"textarea",rows:3,placeholder:"Notification Body",isInvalid:Boolean(null===_||void 0===_||null===(e=_.body)||void 0===e?void 0:e.message)})),(null===_||void 0===_||null===(t=_.body)||void 0===t?void 0:t.message)&&(0,on.jsx)(jn.Z.Control.Feedback,{type:"invalid",children:null!==(i=null===_||void 0===_||null===(o=_.body)||void 0===o?void 0:o.message)&&void 0!==i?i:""})]})}})}),(0,on.jsx)(V.Z,{xs:12,className:"px-2",children:(0,on.jsx)(zn,{children:(0,on.jsx)(bn.mW,{type:"submit",onClick:k,children:Z?"Update Template":"Save Template"})})})]})})},qn=t(9157),En=t(3360),Vn=t(9198),Gn=function(){var n=(0,X.I0)(),e=(0,Q.zn)(),t=(e.notifications_setOpenModalUserRecipients,e.openModalUserRecipients),i=e.notificationRecipientsData,o=e.notifications_setModalSendTemplate,r=e.modalSendTemplate,l=(0,R.useState)(""),a=(0,A.Z)(l,2),s=a[0],d=a[1],c=(0,R.useState)(!1),u=(0,A.Z)(c,2),m=u[0],f=u[1],p=(0,R.useState)([]),h=(0,A.Z)(p,2),x=h[0],v=h[1],g=(0,R.useCallback)((function(n){var e=Array.from(x);if(null===x||void 0===x?void 0:x.find((function(e){return e._id===(null===n||void 0===n?void 0:n._id)}))){var t=Array.from(x).filter((function(e){return e._id!==n._id}));v(t)}else v([].concat(e,[n]))}),[x]),b=(0,R.useMemo)((function(){if((null===i||void 0===i?void 0:i.length)>0)return(null===s||void 0===s?void 0:s.length)>0?i.filter((function(n){var e,t;return null===(e=n.displayName)||void 0===e||null===(t=e.toLowerCase())||void 0===t?void 0:t.includes(null===s||void 0===s?void 0:s.toLowerCase())})):i}),[s,i]),Z=(0,R.useMemo)((function(){return(null===x||void 0===x?void 0:x.length)===i.length}),[x,i]),j=(0,R.useCallback)((function(){n(o({open:!1,template:null}))}),[x,m,t]),w=(0,R.useCallback)((function(n){d(n.target.value)}),[s]),y=(0,R.useCallback)((0,L.Z)((0,F.Z)().mark((function n(){var e,t,i,o;return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={title:(null===r||void 0===r||null===(e=r.template)||void 0===e?void 0:e.title)||"",body:(null===r||void 0===r||null===(t=r.template)||void 0===t?void 0:t.body)||"",imageUrl:(null===r||void 0===r||null===(i=r.template)||void 0===i?void 0:i.imageUrl)||null,users:x.map((function(n){return{userId:n._id,displayName:n.displayName||"",email:n.email,imageUrl:n.imgPath||null}}))},n.next=4,J.ho.admin_sendGeneralNotifications(o);case 4:n.sent&&Y().fire({title:"Success",text:"Notification send successfully!",icon:"success",showCancelButton:!1,confirmButtonColor:"#009c4e",confirmButtonText:"Ok"}).then((function(n){n.isConfirmed})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Y().fire({title:"Opss..",text:"Failed to send notifications!",icon:"error",showCancelButton:!1,confirmButtonColor:"#9c0017",confirmButtonText:"Ok"}).then((function(n){n.isConfirmed}));case 11:case"end":return n.stop()}}),n,null,[[0,8]])}))),[r,x]);(0,R.useEffect)((function(){var n;(null===r||void 0===r||null===(n=r.users)||void 0===n?void 0:n.length)>0&&(v(r),f(!1))}),[r,m]);var k=(0,R.useCallback)((function(){v(Z?[]:i)}),[Z]);return(0,on.jsx)(bn.SI,{open:r.open,onClose:j,width:640,children:(0,on.jsx)(Wn,{children:(0,on.jsxs)(Dn,{children:[(0,on.jsx)(Hn,{children:"Send notification template"}),(null===r||void 0===r?void 0:r.template)&&(0,on.jsx)(Xn,{children:(0,on.jsx)(gn,{data:r.template})}),(0,on.jsx)(Qn,{children:(0,on.jsx)(bn.O1,{name:"searchValue",value:s,placeholder:"Search user",onChange:w,style:{marginBottom:"1rem"}})}),(0,on.jsxs)(E.Z,{className:"justify-content-center",children:[(0,on.jsx)(V.Z,{xs:12,className:"px-2 text-center mb-2",children:(null===b||void 0===b?void 0:b.length)>0&&(0,on.jsx)(En.Z,{size:"sm",onClick:k,children:Z?"Unselect All":"Select All"})}),(0,on.jsx)(V.Z,{xs:12,className:"px-2",children:Array.isArray(b)&&b.length>0?(0,on.jsx)(R.Fragment,{children:b.map((function(n,e){return(0,on.jsx)(Vn.Z,{data:n,checked:x.find((function(e){return e._id===n._id})),onCheck:g,canChecked:!0},String(e))}))}):(0,on.jsx)("div",{className:"text-center py-4",children:(0,on.jsx)("p",{children:"Users not found"})})}),(0,on.jsx)(V.Z,{xs:12,className:"px-2 py-2 text-center",children:(0,on.jsx)(bn.mW,{style:{width:200},onClick:y,children:"Send Notification"})})]})]})})})},Wn=$.ZP.div(N||(N=(0,I.Z)(["\n    overflow-y: scroll;\n    max-height: 100vh;\n"]))),Dn=$.ZP.div(P||(P=(0,I.Z)(["\n    border-radius: 0.4rem;\n    padding: 1.2rem 2.5rem;\n"]))),Qn=$.ZP.div(_||(_=(0,I.Z)([""]))),Hn=$.ZP.div(S||(S=(0,I.Z)(["\n    font-size: 1.1rem;\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 2rem;\n"]))),Xn=$.ZP.div(z||(z=(0,I.Z)(["\n    width: 100%;\n    margin-bottom: 0.75rem;\n"]))),Jn=(0,R.memo)(Gn),Kn=$.ZP.div(B||(B=(0,I.Z)(["\n    overflow-y: scroll;\n    max-height: 100vh;\n"]))),Yn=$.ZP.div(T||(T=(0,I.Z)(["\n    border-radius: 0.4rem;\n    padding: 1.5rem 2rem;\n"]))),$n=$.ZP.div(U||(U=(0,I.Z)(["\n    font-size: 1.3rem;\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 1rem;\n"]))),ne=$.ZP.div(M||(M=(0,I.Z)(["\n    background-color: transparent;\n    padding-left: 40px;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 2.25rem;\n    margin-top: 1.25rem;\n    @media screen and (min-width: ",") {\n        padding: 2rem 1rem;\n        background-color: #00d02a;\n        border-radius: 0.6rem;\n        padding-left: 48px;\n    }\n    h2 {\n        color: #fff;\n        font-size: 22px;\n        font-weight: bold;\n    }\n"])),qn.AV.md),ee=function(){var n=(0,X.I0)(),e=(0,R.useState)(!1),t=(0,A.Z)(e,2),i=t[0],o=t[1],r=(0,R.useState)(null),l=(0,A.Z)(r,2),a=l[0],s=l[1],d=(0,R.useCallback)((function(){o(!1),s(null)}),[]),c=(0,Q.zn)(),u=c.notifications_getListNotificationTemplate,m=c.notifications_getNotificationRecipients,f=c.listNotificationTemplateData,p=(0,Q.aC)(),h=p.user,x=p.isAuthenticated,v=(0,O.s0)(),g=function(e){n(u(e)),n(m(e))},b=(0,R.useCallback)((function(){s(null),setTimeout((function(){o(!0)}),250)}),[]);(0,R.useEffect)((function(){x&&"admin"===(null===h||void 0===h?void 0:h.role)?g():v("/accessdenied")}),[h,x]);var Z=(0,R.useCallback)(function(){var n=(0,L.Z)((0,F.Z)().mark((function n(e,t){var i;return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Boolean(null===e||void 0===e?void 0:e._id)&&!t,n.prev=1,n.next=4,J.ho.admin_createOrUpdateNotificationTemplate(e,t);case 4:n.sent&&(g(),Y().fire({title:"Success",text:"Notification template has been ".concat(i?"updated":"created","!"),icon:"success",showCancelButton:!1,confirmButtonColor:"#009c4e",confirmButtonText:"Ok"}).then((function(n){n.isConfirmed&&(o(!1),s(null))}))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),Y().fire({title:"Opss..",text:"Failed to ".concat(i?"update":"create"," notification template!"),icon:"error",showCancelButton:!1,confirmButtonColor:"#9c0017",confirmButtonText:"Ok"}).then((function(n){n.isConfirmed}));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}(),[]),j=(0,R.useCallback)((function(n){s({_id:n._id,title:n.title,body:n.body,imageUrl:n.imageUrl}),setTimeout((function(){o(!0)}),250)}),[]);return(0,on.jsxs)(W.v,{children:[(0,on.jsx)(G.q,{children:(0,on.jsx)("title",{children:"(Admin) Notification Templates"})}),(0,on.jsx)(q.Z,{fluid:!0,children:(0,on.jsx)("div",{className:"row justify-center h-auto",children:(0,on.jsx)("div",{className:"col-12 col-md-10",children:(0,on.jsx)(E.Z,{className:"justify-content-md-center",children:(0,on.jsx)(V.Z,{children:(0,on.jsxs)("div",{className:"AdminRewardContainer",children:[(0,on.jsxs)(ne,{children:[(0,on.jsx)("button",{className:"back-arrow",onClick:function(){v(-1)},children:(0,on.jsx)(H.r,{})}),(0,on.jsxs)("div",{style:{textAlign:"center"},children:[(0,on.jsx)("h2",{className:"mb-3, text-center",children:"Notification Template"}),(0,on.jsx)(bn.mW,{color:"white",onClick:b,children:"Add Template"})]})]}),(null===f||void 0===f?void 0:f.length)>0&&(null===f||void 0===f?void 0:f.map((function(n,e){return(0,on.jsx)(gn,{fetchData:g,data:n,onEdit:j},String(e))}))),(0,on.jsx)(D.e,{})]})})})})})}),(0,on.jsx)(bn.SI,{open:i,onClose:d,width:620,children:(0,on.jsx)(Kn,{children:(0,on.jsxs)(Yn,{children:[(0,on.jsx)($n,{children:"Notification Template"}),(0,on.jsx)(On,{defaultValue:a,onSubmit:Z})]})})}),(0,on.jsx)(Jn,{})]})}}}]);
//# sourceMappingURL=263.ec6fb904.chunk.js.map